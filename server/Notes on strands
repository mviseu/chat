#TODO
* Make sure write error is replaced by appropriate enum instead of raw value